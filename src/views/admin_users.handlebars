{{! views/admin_users.handlebars }}
<div class="tournament-list-container users-container">
    <h1>Gestión de Usuarios</h1>
        <div class="main-actions">
                <a class="btn" href="/admin/users/new">+ Nuevo usuario</a>
                {{#if meta}}
                    <div class="user-pagination">
                        {{#if links.prev}}<a class="btn" href="{{links.prev}}">← Anterior</a>{{/if}}
                        <span> Página {{meta.page}} / {{meta.total_pages}} </span>
                        {{#if links.next}}<a class="btn" href="{{links.next}}">Siguiente →</a>{{/if}}
                    </div>
                {{/if}}
        </div>
    <div class="table-responsive">
        <table class="users-table">
            <thead>
                <tr class="header-row">
                    <th>ID</th>
                    <th>Avatar</th>
                    <th>Usuario</th>
                    <th>Nombre completo</th>
                    <th>Rol</th>
                    <th>Acciones</th>
                </tr>
            </thead>
            <tbody>
                {{#each users}}
                <tr class="user-row">
                    <td style="font-weight:600; color:#FFD700;">{{id}}</td>
                                        <td>
                                                {{#if avatar}}
                                                    <img src="{{avatar}}" alt="avatar" class="avatar-img">
                                                {{else}}
                                                    <span class="no-avatar">Sin avatar</span>
                                                {{/if}}
                                        </td>
                    <td style="font-weight:600;">{{username}}</td>
                    <td>{{full_name}}</td>
                    <td>
                        <span class="role-badge badge-{{role}}">{{#if (eq role 'admin')}}Admin{{else}}Player{{/if}}</span>
                    </td>
                    <td>
                        <a class="btn small" href="/admin/users/{{id}}/edit">Editar</a>
                        <form action="/admin/users/{{id}}/delete" method="POST" style="display:inline">
                            <button class="btn small danger" type="submit" onclick="return confirm('¿Eliminar usuario?')">Eliminar</button>
                        </form>
                    </td>
                </tr>
                {{/each}}
            </tbody>
        </table>
    </div>
</div>
