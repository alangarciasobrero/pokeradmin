{{!-- PÃ¡gina de configuraciÃ³n mejorada con diseÃ±o moderno --}}

<div class="settings-container">
	<div class="settings-header">
		<h1>âš™ï¸ ConfiguraciÃ³n del Sistema</h1>
		<p class="subtitle">Personaliza la experiencia de PokerAdmin</p>
	</div>

	{{#if flash}}
		<div class="alert alert-{{flash.type}}">
			{{#ifEquals flash.type 'success'}}âœ…{{else}}âš ï¸{{/ifEquals}} {{flash.message}}
		</div>
	{{/if}}

	<div class="settings-grid">
		
		{{!-- SecciÃ³n: DistribuciÃ³n de Puntos --}}
		<div class="settings-card">
			<div class="card-icon">ğŸ†</div>
			<h2>DistribuciÃ³n de Puntos</h2>
			<p class="card-description">Configura cÃ³mo se reparten los puntos de ranking por posiciÃ³n</p>
			
			<form method="post" action="/admin/games/settings/points" class="settings-form">
				<div class="form-grid">
					<div class="form-field">
						<label>ğŸ¥‡ 1Âº Lugar (%)</label>
						<input type="number" name="pos1" value="{{#if (lookup pointsData '1')}}{{lookup pointsData '1'}}{{else}}23{{/if}}" min="0" max="100" step="0.1" required />
					</div>
					<div class="form-field">
						<label>ğŸ¥ˆ 2Âº Lugar (%)</label>
						<input type="number" name="pos2" value="{{#if (lookup pointsData '2')}}{{lookup pointsData '2'}}{{else}}17{{/if}}" min="0" max="100" step="0.1" required />
					</div>
					<div class="form-field">
						<label>ğŸ¥‰ 3Âº Lugar (%)</label>
						<input type="number" name="pos3" value="{{#if (lookup pointsData '3')}}{{lookup pointsData '3'}}{{else}}14{{/if}}" min="0" max="100" step="0.1" required />
					</div>
					<div class="form-field">
						<label>4Âº Lugar (%)</label>
						<input type="number" name="pos4" value="{{#if (lookup pointsData '4')}}{{lookup pointsData '4'}}{{else}}11{{/if}}" min="0" max="100" step="0.1" required />
					</div>
					<div class="form-field">
						<label>5Âº Lugar (%)</label>
						<input type="number" name="pos5" value="{{#if (lookup pointsData '5')}}{{lookup pointsData '5'}}{{else}}9{{/if}}" min="0" max="100" step="0.1" required />
					</div>
					<div class="form-field">
						<label>6Âº Lugar (%)</label>
						<input type="number" name="pos6" value="{{#if (lookup pointsData '6')}}{{lookup pointsData '6'}}{{else}}8{{/if}}" min="0" max="100" step="0.1" required />
					</div>
					<div class="form-field">
						<label>7Âº Lugar (%)</label>
						<input type="number" name="pos7" value="{{#if (lookup pointsData '7')}}{{lookup pointsData '7'}}{{else}}7{{/if}}" min="0" max="100" step="0.1" required />
					</div>
					<div class="form-field">
						<label>8Âº Lugar (%)</label>
						<input type="number" name="pos8" value="{{#if (lookup pointsData '8')}}{{lookup pointsData '8'}}{{else}}6{{/if}}" min="0" max="100" step="0.1" required />
					</div>
					<div class="form-field">
						<label>9Âº Lugar (%)</label>
						<input type="number" name="pos9" value="{{#if (lookup pointsData '9')}}{{lookup pointsData '9'}}{{else}}5{{/if}}" min="0" max="100" step="0.1" required />
					</div>
				</div>
				<div class="form-actions">
					<button type="submit" class="btn btn-primary">ğŸ’¾ Guardar Puntos</button>
				</div>
			</form>
		</div>

		{{!-- SecciÃ³n: ConfiguraciÃ³n de Comisiones --}}
		<div class="settings-card quick-access-card">
			<div class="card-icon">ğŸ’°</div>
			<h2>Comisiones</h2>
			<p class="card-description">Gestiona destinos y porcentajes de distribuciÃ³n de comisiones</p>
			
			<div class="quick-access-content">
				<p>Configura mÃºltiples destinos de comisiÃ³n:</p>
				<ul class="feature-list">
					<li>ğŸ  Casa</li>
					<li>ğŸ† Rankings de temporada</li>
					<li>â­ Torneos especiales (Copa Don Humberto, etc)</li>
				</ul>
				<p class="info-text">Sistema completo con validaciÃ³n de porcentajes y tracking de acumulados</p>
			</div>
			
			<div class="form-actions">
				<a href="/admin/games/settings/commissions" class="btn btn-primary">âš™ï¸ Configurar Comisiones</a>
			</div>
		</div>

		{{!-- SecciÃ³n: Sistema de Puntos por Torneo --}}
		<div class="settings-card">
			<div class="card-icon">â­</div>
			<h2>Sistema de Puntos por Torneo</h2>
			<p class="card-description">Configura los puntos del pozo del torneo y personales</p>
			
			<form method="post" action="/admin/games/settings/tournament-points" class="settings-form">
				<h3 style="margin-top: 0; color: #ffd700;">ğŸ Puntos Personales (Directos)</h3>
				<div class="form-grid" style="grid-template-columns: 1fr 1fr;">
					<div class="form-field">
						<label>ğŸ‘¤ Presencia (Buy-in)</label>
						<input type="number" name="personal_buyin" value="{{config.personal_buyin_points}}" min="0" step="10" required />
						<small>Puntos que recibe cada jugador por participar</small>
					</div>
					<div class="form-field">
						<label>ğŸ”„ Re-entry</label>
						<input type="number" name="personal_reentry" value="{{config.personal_reentry_points}}" min="0" step="10" required />
						<small>Puntos adicionales por cada re-entry</small>
					</div>
				</div>

				<hr style="margin: 20px 0; border: 1px solid #333;">

				<h3 style="color: #4a9eff;">ğŸ† Pozo del Torneo (Top 9)</h3>
				<p style="font-size: 0.9rem; color: #888; margin-bottom: 15px;">
					Este pozo se distribuye entre los 9 finalistas segÃºn los porcentajes configurados arriba
				</p>

				<div class="form-grid" style="grid-template-columns: 1fr 1fr;">
					<div class="form-field">
						<label>ğŸ“… Lunes/MiÃ©rcoles - Buy-in</label>
						<input type="number" name="weekday_buyin" value="{{config.weekday_buyin_points}}" min="0" step="10" required />
						<small>Puntos al pozo por buy-in</small>
					</div>
					<div class="form-field">
						<label>ğŸ“… Lunes/MiÃ©rcoles - Re-entry</label>
						<input type="number" name="weekday_reentry" value="{{config.weekday_reentry_points}}" min="0" step="10" required />
						<small>Puntos al pozo por re-entry</small>
					</div>
					<div class="form-field">
						<label>ğŸ‰ Viernes - Buy-in</label>
						<input type="number" name="friday_buyin" value="{{config.friday_buyin_points}}" min="0" step="10" required />
						<small>Puntos al pozo por buy-in</small>
					</div>
					<div class="form-field">
						<label>ğŸ‰ Viernes - Re-entry</label>
						<input type="number" name="friday_reentry" value="{{config.friday_reentry_points}}" min="0" step="10" required />
						<small>Puntos al pozo por re-entry</small>
					</div>
				</div>

				<div class="info-box" style="background: #1a1a2e; padding: 15px; border-radius: 8px; margin-top: 15px;">
					<h4 style="margin: 0 0 10px 0; color: #ffd700;">â„¹ï¸ Doble Ranking</h4>
					<p style="margin: 0; font-size: 0.9rem; color: #ccc;">
						Cuando un torneo tiene <strong>doble ranking</strong> activado, solo se duplican los puntos de <strong>buy-in</strong> que van al pozo. Los puntos personales y de re-entry NO se duplican.
					</p>
				</div>

				<div class="form-actions">
					<button type="submit" class="btn btn-primary">ğŸ’¾ Guardar Puntos Torneo</button>
				</div>
			</form>
		</div>

		{{!-- SecciÃ³n: ConfiguraciÃ³n General --}}
		<div class="settings-card">
			<div class="card-icon">ğŸ®</div>
			<h2>ConfiguraciÃ³n General</h2>
			<p class="card-description">Ajustes generales del sistema</p>
			
			<form method="post" action="/admin/games/settings/general" class="settings-form">
				<div class="form-group">
					<label>ğŸ’µ Buy-in predeterminado</label>
					<input type="number" name="default_buyin" value="{{config.default_buyin}}" min="1" step="1" />
				</div>
				<div class="form-group">
					<label>ğŸ”„ Re-entry predeterminado</label>
					<input type="number" name="default_reentry" value="{{config.default_reentry}}" min="1" step="1" />
				</div>
				<div class="form-group">
					<label>ğŸ¯ Bounty predeterminado</label>
					<input type="number" name="default_bounty" value="{{config.default_bounty}}" min="0" step="1" />
				</div>
				<div class="form-group">
					<label>â° Niveles de ciegas por defecto</label>
					<input type="text" name="default_blind_levels" value="{{config.default_blind_levels}}" placeholder="25/50" />
					<small>Formato: pequeÃ±a/grande (ej: 25/50)</small>
				</div>
				<div class="form-actions">
					<button type="submit" class="btn btn-primary">ğŸ’¾ Guardar General</button>
				</div>
			</form>
		</div>

		{{!-- SecciÃ³n: Idioma --}}
		<div class="settings-card">
			<div class="card-icon">ğŸŒ</div>
			<h2>Idioma / Language</h2>
			<p class="card-description">Selecciona el idioma de la interfaz</p>
			
			<form method="post" action="/admin/games/settings/language" class="settings-form">
				<div class="language-options">
					<label class="language-option">
						<input type="radio" name="language" value="es" {{#if (eq config.language 'es')}}checked{{/if}} />
						<div class="language-card">
							<span class="flag">ğŸ‡¦ğŸ‡·</span>
							<span class="lang-name">EspaÃ±ol</span>
						</div>
					</label>
					<label class="language-option">
						<input type="radio" name="language" value="en" {{#if (eq config.language 'en')}}checked{{/if}} />
						<div class="language-card">
							<span class="flag">ğŸ‡ºğŸ‡¸</span>
							<span class="lang-name">English</span>
						</div>
					</label>
					<label class="language-option">
						<input type="radio" name="language" value="pt" {{#if (eq config.language 'pt')}}checked{{/if}} />
						<div class="language-card">
							<span class="flag">ğŸ‡§ğŸ‡·</span>
							<span class="lang-name">PortuguÃªs</span>
						</div>
					</label>
				</div>
				<div class="form-actions">
					<button type="submit" class="btn btn-primary">ğŸ’¾ Guardar Idioma</button>
				</div>
			</form>
		</div>

		{{!-- SecciÃ³n: Accesos RÃ¡pidos --}}
		<div class="settings-card">
			<div class="card-icon">ğŸš€</div>
			<h2>Accesos RÃ¡pidos</h2>
			<p class="card-description">Herramientas y utilidades del sistema</p>
			
			<div class="quick-actions">
				<a href="/admin/bonus/attendance" class="quick-action">
					<span class="action-icon">ğŸ</span>
					<div class="action-content">
						<strong>Bonus Asistencia</strong>
						<small>Ver asistencias y bonus</small>
					</div>
				</a>
				<a href="/admin/bonus/attendance-calendar" class="quick-action">
					<span class="action-icon">ğŸ“…</span>
					<div class="action-content">
						<strong>Calendario Asistencias</strong>
						<small>Vista mensual de asistencias</small>
					</div>
				</a>
				<a href="/admin/games/settings/pools" class="quick-action">
					<span class="action-icon">ğŸ“Š</span>
					<div class="action-content">
						<strong>Pozos Acumulados</strong>
						<small>Ver dashboard de pozos</small>
					</div>
				</a>
				<a href="/admin/seasons" class="quick-action">
					<span class="action-icon">ğŸ“…</span>
					<div class="action-content">
						<strong>Temporadas</strong>
						<small>Gestionar temporadas</small>
					</div>
				</a>
				<a href="/admin/games/rankings" class="quick-action">
					<span class="action-icon">ğŸ†</span>
					<div class="action-content">
						<strong>Rankings</strong>
						<small>Ver clasificaciones</small>
					</div>
				</a>
			</div>
		</div>

		{{!-- SecciÃ³n: Sistema --}}
		<div class="settings-card">
			<div class="card-icon">ğŸ’»</div>
			<h2>Sistema</h2>
			<p class="card-description">InformaciÃ³n y mantenimiento</p>
			
			<div class="system-info">
				<div class="info-row">
					<span class="info-label">VersiÃ³n:</span>
					<span class="info-value">v2.0.0</span>
				</div>
				<div class="info-row">
					<span class="info-label">Base de datos:</span>
					<span class="info-value">MySQL 8.0</span>
				</div>
				<div class="info-row">
					<span class="info-label">Backups:</span>
					<span class="info-value">data/backups/</span>
				</div>
			</div>
			
			<div class="system-actions">
				<button type="button" class="btn btn-warning" onclick="if(confirm('Â¿Crear backup de la base de datos?')) alert('Funcionalidad en desarrollo')">
					ğŸ’¾ Crear Backup
				</button>
				<button type="button" class="btn btn-secondary" onclick="alert('Cache limpiado')">
					ğŸ§¹ Limpiar Cache
				</button>
			</div>
		</div>

	</div>
</div>

<style>
.settings-container {
	max-width: 1400px;
	margin: 2rem auto;
	padding: 0 2rem;
}

.settings-header {
	text-align: center;
	margin-bottom: 3rem;
}

.settings-header h1 {
	color: #FFD700;
	font-size: 2.5rem;
	margin-bottom: 0.5rem;
}

.subtitle {
	color: rgba(255, 255, 255, 0.7);
	font-size: 1.1rem;
}

.alert {
	padding: 1rem 1.5rem;
	border-radius: 8px;
	margin-bottom: 2rem;
	text-align: center;
	font-weight: 600;
}

.alert-success {
	background: rgba(76, 175, 80, 0.1);
	border: 1px solid rgba(76, 175, 80, 0.3);
	color: #4CAF50;
}

.alert-error {
	background: rgba(244, 67, 54, 0.1);
	border: 1px solid rgba(244, 67, 54, 0.3);
	color: #f44336;
}

.settings-grid {
	display: grid;
	grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
	gap: 2rem;
}

.settings-card {
	background: rgba(255, 255, 255, 0.03);
	border: 1px solid rgba(255, 255, 255, 0.1);
	border-radius: 16px;
	padding: 2rem;
	transition: all 0.3s ease;
}

.settings-card:hover {
	border-color: rgba(255, 215, 0, 0.3);
	box-shadow: 0 8px 32px rgba(255, 215, 0, 0.1);
}

.card-icon {
	font-size: 3rem;
	margin-bottom: 1rem;
}

.settings-card h2 {
	color: #FFD700;
	margin: 0 0 0.5rem 0;
	font-size: 1.5rem;
}

.card-description {
	color: rgba(255, 255, 255, 0.6);
	margin-bottom: 1.5rem;
	font-size: 0.95rem;
}

.settings-form {
	margin-top: 1.5rem;
}

.form-grid {
	display: grid;
	grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
	gap: 1rem;
	margin-bottom: 1.5rem;
}

.form-field label,
.form-group label {
	display: block;
	color: #FFD700;
	font-weight: 600;
	margin-bottom: 0.5rem;
	font-size: 0.9rem;
}

.form-field input,
.form-group input,
.form-group select {
	width: 100%;
	padding: 0.75rem;
	background: rgba(255, 255, 255, 0.05);
	border: 1px solid rgba(255, 255, 255, 0.1);
	border-radius: 8px;
	color: #fff;
	font-size: 1rem;
	transition: all 0.3s ease;
}

.form-field input:focus,
.form-group input:focus {
	border-color: rgba(255, 215, 0, 0.5);
	outline: none;
}

.form-group {
	margin-bottom: 1.5rem;
}

.form-group small {
	display: block;
	margin-top: 0.25rem;
	color: rgba(255, 255, 255, 0.5);
	font-size: 0.85rem;
}

.form-actions {
	display: flex;
	justify-content: flex-end;
	margin-top: 1.5rem;
}

.btn {
	padding: 0.75rem 2rem;
	border: none;
	border-radius: 8px;
	font-weight: 700;
	cursor: pointer;
	transition: all 0.3s ease;
	font-size: 1rem;
}

.btn-primary {
	background: linear-gradient(135deg, rgba(255, 215, 0, 0.3), rgba(255, 215, 0, 0.1));
	border: 2px solid #FFD700;
	color: #FFD700;
}

.btn-primary:hover {
	background: linear-gradient(135deg, rgba(255, 215, 0, 0.4), rgba(255, 215, 0, 0.2));
	transform: translateY(-2px);
}

.btn-warning {
	background: rgba(255, 152, 0, 0.1);
	border: 2px solid rgba(255, 152, 0, 0.3);
	color: #FF9800;
}

.btn-secondary {
	background: rgba(158, 158, 158, 0.1);
	border: 2px solid rgba(158, 158, 158, 0.3);
	color: #9e9e9e;
}

.quick-access-card {
	background: linear-gradient(135deg, rgba(102, 126, 234, 0.1), rgba(118, 75, 162, 0.1));
	border-color: rgba(102, 126, 234, 0.3);
}

.quick-access-content {
	margin: 1.5rem 0;
}

.quick-access-content p {
	color: rgba(255, 255, 255, 0.9);
	margin-bottom: 1rem;
}

.feature-list {
	list-style: none;
	padding: 0;
	margin: 1rem 0;
}

.feature-list li {
	padding: 0.5rem 0;
	color: rgba(255, 255, 255, 0.8);
	font-size: 0.95rem;
}

.info-text {
	color: rgba(255, 255, 255, 0.6);
	font-size: 0.9rem;
	font-style: italic;
	margin-top: 1rem;
}

.language-options {
	display: grid;
	grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
	gap: 1rem;
	margin-bottom: 1.5rem;
}

.language-option {
	cursor: pointer;
}

.language-option input {
	display: none;
}

.language-card {
	display: flex;
	flex-direction: column;
	align-items: center;
	gap: 0.5rem;
	padding: 1rem;
	background: rgba(255, 255, 255, 0.03);
	border: 2px solid rgba(255, 255, 255, 0.1);
	border-radius: 12px;
	transition: all 0.3s ease;
}

.language-option input:checked + .language-card {
	border-color: #FFD700;
	background: rgba(255, 215, 0, 0.1);
}

.language-card .flag {
	font-size: 2.5rem;
}

.language-card .lang-name {
	color: #fff;
	font-weight: 600;
}

.quick-actions {
	display: flex;
	flex-direction: column;
	gap: 0.75rem;
}

.quick-action {
	display: flex;
	align-items: center;
	gap: 1rem;
	padding: 1rem;
	background: rgba(255, 255, 255, 0.03);
	border: 1px solid rgba(255, 255, 255, 0.1);
	border-radius: 10px;
	text-decoration: none;
	color: inherit;
	transition: all 0.3s ease;
}

.quick-action:hover {
	border-color: rgba(255, 215, 0, 0.5);
	background: rgba(255, 215, 0, 0.05);
	transform: translateX(5px);
}

.action-icon {
	font-size: 2rem;
}

.action-content strong {
	display: block;
	color: #FFD700;
	margin-bottom: 0.25rem;
}

.action-content small {
	color: rgba(255, 255, 255, 0.6);
	font-size: 0.85rem;
}

.system-info {
	margin-bottom: 1.5rem;
}

.info-row {
	display: flex;
	justify-content: space-between;
	padding: 0.75rem 0;
	border-bottom: 1px solid rgba(255, 255, 255, 0.05);
}

.info-label {
	color: rgba(255, 255, 255, 0.6);
}

.info-value {
	color: #FFD700;
	font-weight: 600;
}

.system-actions {
	display: flex;
	gap: 1rem;
	flex-wrap: wrap;
}

@media (max-width: 768px) {
	.settings-grid {
		grid-template-columns: 1fr;
	}
	
	.form-grid {
		grid-template-columns: repeat(2, 1fr);
	}
	
	.quick-actions {
		flex-direction: column;
	}
}

@media (max-width: 480px) {
	.settings-container {
		padding: 1rem;
	}
	
	.settings-header h1 {
		font-size: 1.5rem;
	}
	
	.form-grid {
		grid-template-columns: 1fr;
	}
	
	.settings-card {
		padding: 1rem;
	}
	
	.quick-action {
		padding: 0.75rem;
	}
	
	.btn-primary {
		padding: 0.75rem 1rem;
		font-size: 0.9rem;
	}
}

@media (max-width: 375px) {
	.settings-container {
		padding: 0.75rem;
	}
	
	.settings-header h1 {
		font-size: 1.25rem;
	}
	
	.settings-card {
		padding: 0.75rem;
	}
	
	.card-icon {
		font-size: 2rem;
	}
	
	.quick-action {
		padding: 0.5rem;
		gap: 0.5rem;
	}
	
	.action-icon {
		font-size: 1.5rem;
	}
}
</style>
