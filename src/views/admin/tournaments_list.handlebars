 
<div class="admin-tournaments">
  <div class="page-header admin-header">
    <h1>Gesti√≥n de Torneos</h1>
    <div style="display:flex;gap:1rem;align-items:center">
      <a href="/admin/games/tournaments/new" class="btn add-tournament-btn">+ Nuevo Torneo</a>
    </div>
  </div>

  <div class="filters-bar">
    <form method="get" action="/admin/games/tournaments/list" style="display:flex;gap:1rem;align-items:end;flex-wrap:wrap">
      <div class="filter-group">
        <label for="date_from">Desde:</label>
        <input type="date" id="date_from" name="date_from" value="{{dateFrom}}" class="filter-input">
      </div>
      <div class="filter-group">
        <label for="date_to">Hasta:</label>
        <input type="date" id="date_to" name="date_to" value="{{dateTo}}" class="filter-input">
      </div>
      <div class="filter-group">
        <label>
          <input type="checkbox" name="show_closed" value="true" {{#if showClosed}}checked{{/if}}>
          Incluir cerrados
        </label>
      </div>
      <button type="submit" class="btn btn-primary">üîç Filtrar</button>
      <a href="/admin/games/tournaments/list" class="btn" style="background:#757575">‚úï Limpiar</a>
    </form>
  </div>

  {{#if tournaments.length}}
    <div class="tournaments-grid">
      {{#each tournaments}}
        <article class="t-card {{#unless registration_open}}t-card-closed{{/unless}}">
          <h3 class="t-title">
            <a href="/admin/games/tournaments/{{id}}">{{tournament_name}}</a>
            {{#unless registration_open}}<span class="badge-closed">üîí Cerrado</span>{{/unless}}
          </h3>
          <div class="t-meta">Fecha: <strong>{{start_date}}</strong></div>
          <div class="t-meta">Buy-in: <strong>${{buy_in}}</strong> ‚Äî Stack: <strong>{{starting_stack}}</strong></div>
          <div class="t-actions">
              <div class="t-actions-row"><a class="btn" href="/admin/games/tournaments/{{id}}">Ver / Editar</a></div>
            <form method="post" action="/admin/games/tournaments/{{id}}/delete" class="form-inline">
              <button class="btn btn-danger btn-sm" type="submit">Eliminar</button>
            </form>
          </div>
        </article>
      {{/each}}
    </div>

    {{#if meta}}
      <nav class="pagination" aria-label="Paginaci√≥n de torneos">
        {{#if links.prev}}<a class="btn" href="{{links.prev}}">‚Üê Anterior</a>{{else}}<span class="disabled">‚Üê Anterior</span>{{/if}}
        <span class="page-info">P√°gina {{meta.page}} de {{meta.total_pages}}</span>
        {{#if links.next}}<a class="btn" href="{{links.next}}">Siguiente ‚Üí</a>{{else}}<span class="disabled">Siguiente ‚Üí</span>{{/if}}
      </nav>

      <div class="page-numbers" role="navigation" aria-label="Navegaci√≥n por p√°ginas">
        {{#each (range 1 meta.total_pages)}}
          {{#ifEquals this ../meta.page}}
            <span class="page current">{{this}}</span>
          {{else}}
            <a class="page" href="/admin/games/tournaments/list?page={{this}}&{{../queryString}}">{{this}}</a>
          {{/ifEquals}}
        {{/each}}
      </div>
    {{/if}}
  {{else}}
    <div class="empty">No hay torneos registrados.</div>
  {{/if}}
</div>

<style>
.admin-tournaments { max-width: 1100px; margin: 2rem auto; padding: 1rem; }
.admin-header { display:flex; justify-content:space-between; align-items:center; margin-bottom:1rem }
.filters-bar { background: var(--card-bg); padding: 1rem; border-radius: 8px; margin-bottom: 1.5rem; box-shadow: 0 2px 8px rgba(0,0,0,0.05); }
.filter-group { display: flex; flex-direction: column; gap: 0.3rem; }
.filter-group label { font-size: 0.9rem; font-weight: 500; }
.filter-input { padding: 0.4rem 0.6rem; border: 1px solid #ddd; border-radius: 4px; font-size: 0.95rem; }
.tournaments-grid { display:grid; grid-template-columns: repeat(3, 1fr); gap:1rem }
.t-card { background: var(--card-bg); color: inherit; border-radius:8px; padding:1rem; box-shadow:0 4px 12px rgba(0,0,0,0.08) }
.t-card-closed { opacity: 0.7; background: var(--muted-surface); border-left: 4px solid #757575; }
.t-title { margin:0 0 0.5rem 0; display:flex; align-items:center; gap:0.5rem; }
.badge-closed { font-size:0.75rem; padding:0.2rem 0.5rem; background:#757575; color:white; border-radius:4px; white-space:nowrap; }
.t-meta { color: #dfe6ff; font-size:0.95rem; margin-bottom:0.25rem }
.t-actions { margin-top:0.5rem }
.btn { display:inline-block; padding:0.4rem 0.8rem; border-radius:6px; text-decoration:none }
.btn-primary { background: var(--accent); color:#fff }
.btn-sm { font-size:0.9rem; padding:0.25rem 0.5rem }
.btn-danger { background:#dc3545; color:#fff }
.pagination { display:flex; gap:1rem; align-items:center; justify-content:center; margin-top:1rem }
.page-numbers { display:flex; gap:0.5rem; justify-content:center; margin-top:0.5rem }
.page { padding:0.3rem 0.55rem; border-radius:4px; background: var(--muted-surface); color: inherit; text-decoration:none }
.page.current { background:#007bff; color:#fff; font-weight:bold }
.disabled { opacity:0.45 }
@media (max-width: 900px) { .tournaments-grid { grid-template-columns: repeat(2, 1fr); } }
@media (max-width: 600px) { .tournaments-grid { grid-template-columns: 1fr; } }
</style>
 
